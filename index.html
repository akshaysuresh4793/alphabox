<html>
	<head>
		<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
		<script src="component.js"></script>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
		<script>
		
		$(document).ready(function() {
			dictwords = ["aah","aal","aas","aba","abo","abs","aby","ace","act","add","ado","ads","adz","aff","aft","aga","age","ago","ags","aha","ahi","ahs","aid","ail","aim","ain","air","ais","ait","aji","ala","alb","ale","all","alp","als","alt","ama","ami","amp","amu","ana","and","ane","ani","ant","any","ape","apo","app","apt","arb","arc","are","arf","ark","arm","ars","art","ash","ask","asp","ass","ate","att","auk","ava","ave","avo","awa","awe","awl","awn","axe","aye","ays","azo","baa","bad","bag","bah","bal","bam","ban","bap","bar","bas","bat","bay","bed","bee","beg","bel","ben","bes","bet","bey","bib","bid","big","bin","bio","bis","bit","biz","boa","bob","bod","bog","boo","bop","bos","bot","bow","box","boy","bra","bro","brr","bub","bud","bug","bum","bun","bur","bus","but","buy","bye","bys","cab","cad","caf","cal","cam","can","cap","car","cat","caw","cay","cee","cel","cep","chi","cig","cis","cob","cod","cog","col","con","coo","cop","cor","cos","cot","cow","cox","coy","coz","cru","cry","cub","cud","cue","cum","cup","cur","cut","cuz","cwm","dab","dad","dag","dah","dak","dal","dam","dan","dap","das","daw","day","deb","dee","def","del","den","dep","dev","dew","dex","dey","dib","did","die","dif","dig","dim","din","dip","dis","dit","doc","doe","dog","doh","dol","dom","don","dor","dos","dot","dow","dry","dub","dud","due","dug","duh","dui","dum","dun","duo","dup","dye","ear","eat","eau","ebb","eco","ecu","edh","eds","eek","eel","eew","eff","efs","eft","egg","ego","eke","eld","elf","elk","ell","elm","els","eme","emo","ems","emu","end","eng","ens","eon","era","ere","erg","ern","err","ers","ess","est","eta","eth","eve","ewe","eye","fab","fad","fag","fah","fan","far","fas","fat","fax","fay","fed","fee","feh","fem","fen","fer","fes","fet","feu","few","fey","fez","fib","fid","fie","fig","fil","fin","fir","fit","fix","fiz","flu","fly","fob","foe","fog","foh","fon","foo","fop","for","fou","fox","foy","fro","fry","fub","fud","fug","fun","fur","gab","gad","gae","gag","gal","gam","gan","gap","gar","gas","gat","gay","ged","gee","gel","gem","gen","get","gey","ghi","gib","gid","gie","gif","gig","gin","gip","gis","git","gnu","goa","gob","god","goo","gor","gos","got","gox","grr","gul","gum","gun","gut","guv","guy","gym","gyp","had","hae","hag","hah","haj","ham","hao","hap","has","hat","haw","hay","heh","hem","hen","hep","her","hes","het","hew","hex","hey","hic","hid","hie","him","hin","hip","his","hit","hmm","hob","hod","hoe","hog","hom","hon","hoo","hop","hos","hot","how","hoy","hub","hue","hug","huh","hum","hun","hup","hut","hyp","ice","ich","ick","icy","ids","iff","ifs","igg","ilk","ill","imp","ink","inn","ins","ion","ire","irk","ism","its","ivy","jab","jag","jam","jar","jaw","jay","jee","jet","jeu","jib","jig","jin","job","joe","jog","jot","jow","joy","jug","jun","jus","jut","kab","kae","kaf","kas","kat","kay","kea","kef","keg","ken","kep","kex","key","khi","kid","kif","kin","kip","kir","kis","kit","koa","kob","koi","kop","kor","kos","kue","kye","lab","lac","lad","lag","lah","lam","lap","lar","las","lat","lav","law","lax","lay","lea","led","lee","leg","lei","lek","les","let","leu","lev","lex","ley","lez","lib","lid","lie","lin","lip","lis","lit","lob","log","loo","lop","lor","lot","low","lox","lud","lug","lum","lun","luv","lux","lye","mac","mad","mae","mag","mam","man","map","mar","mas","mat","maw","max","may","med","meg","meh","mel","mem","men","mes","met","mew","mho","mib","mic","mid","mig","mil","mim","mir","mis","mix","mmm","moa","mob","moc","mod","mog","moi","mol","mom","mon","moo","mop","mor","mos","mot","mow","mud","mug","mum","mun","mus","mut","mux","myc","nab","nae","nag","nah","nam","nan","nap","nav","naw","nay","neb","nee","neg","net","new","nib","nil","nim","nip","nit","nix","nob","nod","nog","noh","nom","noo","nor","nos","not","now","nth","nub","nug","nun","nus","nut","oaf","oak","oar","oat","oba","obe","obi","oca","och","oda","odd","ode","ods","oes","off","oft","ohm","oho","ohs","oik","oil","oka","oke","old","ole","oma","oms","one","ono","ons","oof","ooh","oot","opa","ope","ops","opt","ora","orb","orc","ore","org","ors","ort","ose","oud","our","out","ova","owe","owl","own","owt","oxo","oxy","pac","pad","pah","pak","pal","pam","pan","pap","par","pas","pat","paw","pax","pay","pea","pec","ped","pee","peg","peh","pen","pep","per","pes","pet","pew","phi","pho","pht","pia","pic","pie","pig","pin","pip","pis","pit","piu","pix","ply","pod","poh","poi","pol","pom","poo","pop","pos","pot","pow","pox","pro","pry","psi","pst","pub","pud","pug","pul","pun","pup","pur","pus","put","pya","pye","pyx","qat","qis","qua","rad","rag","rah","rai","raj","ram","ran","rap","ras","rat","raw","rax","ray","reb","rec","red","ree","ref","reg","rei","rem","rep","res","ret","rev","rex","rez","rho","ria","rib","rid","rif","rig","rim","rin","rip","rob","roc","rod","roe","rom","roo","rot","row","rub","rue","rug","rum","run","rut","rya","rye","ryu","sab","sac","sad","sae","sag","sal","san","sap","sat","sau","saw","sax","say","sea","sec","see","seg","sei","sel","sen","ser","set","sev","sew","sex","sez","sha","she","shh","sho","shy","sib","sic","sig","sim","sin","sip","sir","sis","sit","six","ska","ski","sky","sly","sob","soc","sod","soh","sol","som","son","sop","sos","sot","sou","sow","sox","soy","spa","spy","sri","sty","sub","sue","suk","sum","sun","sup","suq","sus","syn","tab","tad","tae","tag","taj","tam","tan","tao","tap","tar","tas","tat","tau","tav","taw","tax","tea","tec","ted","tee","teg","tel","ten","tes","tet","tew","the","tho","thy","tic","tie","til","tin","tip","tis","tit","tix","tiz","tod","toe","tog","tom","ton","too","top","tor","tot","tow","toy","try","tsk","tub","tug","tui","tum","tun","tup","tut","tux","twa","two","tye","udo","ugh","uke","ulu","umm","ump","ums","uni","uns","upo","ups","urb","urd","urn","urp","use","uta","ute","uts","vac","van","var","vas","vat","vau","vav","vaw","vee","veg","vet","vex","via","vid","vie","vig","vim","vin","vis","voe","vog","vow","vox","vug","vum","wab","wad","wae","wag","wan","wap","war","was","wat","waw","wax","way","web","wed","wee","wen","wet","wha","who","why","wig","win","wis","wit","wiz","woe","wog","wok","won","woo","wop","wos","wot","wow","wry","wud","wuz","wye","wyn","xed","xis","yag","yah","yak","yam","yap","yar","yas","yaw","yay","yea","yeh","yen","yep","yer","yes","yet","yew","yez","yid","yin","yip","yob","yod","yok","yom","yon","you","yow","yuk","yum","yup","zag","zap","zas","zax","zed","zee","zek","zep","zig","zin","zip","zit","zoa","zoo","zuz","zzz"];


			var contains = function(needle) {
				// Per spec, the way to identify NaN is that it is not equal to itself
				var findNaN = needle !== needle;
				var indexOf;

				if(!findNaN && typeof Array.prototype.indexOf === 'function') {
					indexOf = Array.prototype.indexOf;
				} else {
					indexOf = function(needle) {
						var i = -1, index = -1;

						for(i = 0; i < this.length; i++) {
							var item = this[i];

							if((findNaN && item !== item) || item === needle) {
								index = i;
								break;
							}
						}

						return index;
					};
				}

				return indexOf.call(this, needle) > -1;
			};

			function getRandomString(size) {
				var emptyString = "";
				var alphabet = "abcdefghijklmnopqrstuvwxyz";

				while (emptyString.length < size) {
				  emptyString += alphabet[Math.floor(Math.random() * alphabet.length)];
				} 
				return emptyString;
			}
		
			function getRandomIntInclusive(min, max) {
				min = Math.ceil(min);
				max = Math.floor(max);
				return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive 
			}
			
			function getRandomColor() {
				var letters = '0123456789ABCDEF';
				var color = '#';
				for (var i = 0; i < 6; i++) {
					color += letters[Math.floor(Math.random() * 16)];
				}
				return color;
			}

		
			function boxes() {
				value = getRandomString(1);
				positionX = getRandomIntInclusive(-2,2);
				positionY = getRandomIntInclusive(-2,2);
				positionZ = getRandomIntInclusive(-2,2);
				postion = positionX + " " + positionY + " " + positionZ;
				angles = [0,30,45,60,90];
				angleX = getRandomIntInclusive(0,4);
				angleY = getRandomIntInclusive(0,4);
				angleZ = getRandomIntInclusive(0,4);
				angle = angles[angleX] + " " + angles[angleY] + " " + angles[angleZ];
				color = getRandomColor();
				console.log("Boxes");
				//html = '<a-box src="a.jpg" value="a" cursor-listener position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>';
				id = + new Date();
				html = '<a-box id="' + id + '" ';
				html += 'src="' + 'alphabets/' + value + '.jpg" width="1" height="1" ';
				html += 'value="' + value + '" ';
				html += 'cursor-listener ';
				html += 'position="' + positionX + ' ' + positionY + ' ' + positionZ + '" ';
				html += 'rotation="' + angleX + ' ' + angleY + ' ' + angleZ + '" ';
				html += 'color="' + color + '">';
				html += '</a-box>';
				console.log(html);
				$("#myScene").append(html);
				setTimeout(function() { $("#" + id).remove() },15000);
			}
			
			words = [];
			currentWord = {};
			currentBox = 0;
			points = 0;
			AFRAME.registerComponent('cursor-listener', {
    				init: function () {
         				this.el.addEventListener('click', function (evt) {
	        				// console.log('I was clicked at: ', evt.detail.intersection.point);					
							if(currentBox < 3) {
								val = evt.currentTarget.getAttribute("value");
								$("#alpha-box" + currentBox).attr("value", val);
								currentBox++;	
								evt.currentTarget.parentNode.removeChild(evt.currentTarget);
								boxes();
							}	
      					});
    				}
  			});
			
			
			$(".alpha").click(function() {
				$(this).attr("value","");
				if(currentBox > -1) {
					currentBox--;
				}	
			});
			
			$("#submit").click(function() {
				if(typeof($("#alpha-box0").attr("value")) != "undefined") {
					word = $("#alpha-box0").attr("value")
					if(typeof($("#alpha-box1").attr("value")) != "undefined") {
						word += $("#alpha-box1").attr("value")
						if(typeof($("#alpha-box2").attr("value")) != "undefined") {
							word += $("#alpha-box2").attr("value")
						}
					}
				}
				
				console.log("submit");
				console.log(word);
				console.log(word.length);
				if(word.length == 3) {
					/*$.ajax({
					url: "https://api.datamuse.com/words?ml=" + word,
					success: function(r) {
						if(r == "[]") {
							
						} else {
							points += 10;
							$("#points").html(points);
							$("#alpha-box0").attr("value","");
							$("#alpha-box1").attr("value","");
							$("#alpha-box2").attr("value","");
							currentBox = 0;
						}
					}
					});*/
					console.log("Value is " + $.inArray(word, dictwords));
					if($.inArray(word, dictwords) !== -1) {
						points += 10;
						$("#points").html(points);
						$("#alpha-box0").attr("value","");
						$("#alpha-box1").attr("value","");
						$("#alpha-box2").attr("value","");
						currentBox = 0;
					}
				}
			});
			
			
			setInterval(boxes,6000);
		});
		</script>
	</head>
	<body>
	<div id="point">
		<!-- <p id="alpha-box0" style="border: 1px solid black; width:50px; height:50px; display:inline-block;">
		</p>
		<p id="alpha-box1" style="border: 1px solid black; width:50px; height:50px; display:inline-block;">
		</p>
		<p id="alpha-box2" style="border: 1px solid black; width:50px; height:50px; display:inline-block;">
		</p> -->
		<div class="row">
			<div class="col-md-2">
				<input type="button" class="btn btn-success alpha" id="alpha-box0" />
			</div>
			<div class="col-md-2">		
				<input type="button" class="btn btn-success alpha" id="alpha-box1" />
			</div>
			<div class="col-md-2">
				<input type="button" class="btn btn-success alpha" id="alpha-box2" />
			</div>
			<div class="col-md-2">
				<input id="submit" type="button" value="Submit" class="btn btn-primary" />
			</div>
			<div class="col-md-2">
				<h3 id="points">0</h3> points
			</div>
		</div>
	</div>
	<a-scene id="myScene">
		<a-sky src="sky.jpg"></a-sky>
		<!-- <a-box src="a.jpg" cursor-listener position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box> -->
		<a-camera>
        		<a-cursor intersection-spawn="event: click; mixin: voxel"></a-cursor>
		</a-camera>
		<!-- <a-entity id="box" src="a.jpg" cursor-listener geometry="primitive: box" material="color: blue" position="-2 2.2 -1.5"></a-entity> -->
	</a-scene>
 	</body>
</html>
